<script type="text/template" id="sys_atom_controls_menu">
	<div id="menu" class="btn-toolbar">
		{{_.each(groups, function(group){}}
		<ul class="btn-group">
			{{_.each(group.menus, function(menu, menuIndex, list){
					var lastStr = (menuIndex == list.length - 1) ? ((list.length == 1) ? "btn-onlyone" : "btn-last") : (menuIndex == 0 ? "btn-first" : "");
					if(menu.menus){}}
						<button id="{{= menu.id}}" class="{{= cssclass}}">
							{{if(menu.icon && menu.icon != null){}}
								<i class="{{= menu.icon}}"></i>
							{{}}}
							{{= menu.name}}
						</button>
						<a class="{{= cssclass}} dropdown-toggle {{= lastStr}}" data-toggle="dropdown" href="#">
    						<span class="caret"></span>
  						</a>
						<ul class="dropdown-menu">
						{{
							_.each(menu.menus, function(cmenu){
								if(cmenu.menus){}}
									<li id="{{= menu.id + '_' + cmenu.id}}" class="dropdown-submenu">
    									<a tabindex="-1" href="#">
												{{if(cmenu.icon && cmenu.icon != null){}}
												<i class="{{= cmenu.icon}}"></i>
												{{}}}
											{{= cmenu.name}}
										</a>
    									<ul class="dropdown-menu">
											{{
											_.each(cmenu.menus, function(ccmenu){
											}}
												<li id=" id="{{= menu.id + '_' + cmenu.id + "_" + ccmenu.id}}" class="{{= ccmenu.disabled? 'disabled' : ''}}"><a tabindex="-1" href="#">
														{{if(ccmenu.icon && ccmenu.icon != null){}}
															<i class="{{= ccmenu.icon}}"></i>
														{{}}}
													{{= ccmenu.name}}</a>
												</li>
											{{});}}
										</ul>
									</li>
								{{
								}
								else if(cmenu.divider){}}
									<li class="divider"></li>
								{{}
								else{}}
								<li id="{{= menu.id + '_' + cmenu.id}}" class="{{= cmenu.disabled? 'disabled' : ''}}"><a tabindex="-1" href="#">
									{{if(cmenu.icon && cmenu.icon != null){}}
										<i class="{{= cmenu.icon}}"></i>
									{{}}}
									{{= cmenu.name}}</a>
								</li>
								{{}
							});
						}}
						</ul>
					{{}
					
					else{}}
						<li id="{{= menu.id}}" class="{{= cssclass}} {{=menu.disabled? 'disabled' : ''}} {{= lastStr}}" id="{{= menu.id}}" wtfinnertype="wtfitem">
							{{if(buttonMode == 0 || buttonMode == 1){
								if(menu.icon && menu.icon != null){}}
									<i class="{{= menu.icon}}"></i>
								{{}
							}
							if(buttonMode != 1){
							}}
							{{= menu.name}}
							{{
								}
							}}
						</li>
					{{}
				});
			}}
		</ul>
		{{});}}
	</div>
</script>